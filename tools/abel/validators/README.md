# ABEL Spreadsheet

### Overview
The ABEL Spreadsheet serves as a frontend for the ABEL application. The
spreadsheet is the human-friendly interface that allows users to make changes to
a Building Configuration file.

## Google Sheets template
Since the format of an ABEL spreadsheet is well-defined, it is suggested that
you use the following [template](https://docs.google.com/spreadsheets/d/1qKMlpJI5-_h_8innNniEkpatMBcRHSGekrRwTsPQ618/copy#gid=980240783) as either your input or output spreadsheet.

Below is a definition of each table and column in the ABEL spreadsheet:
- [Site](#site)
- [Entities](#entities)
- [Entity Fields](#entity-fields)
- [States](#states)
- [Connections](#connections)

### Site

The `Site` tab holds all information about a project site or building.

`Building Code` *string* **required**

- The human-readable code for a building. e.g. `US-SVL-TC2`

`Entity Guid` *string*

- [UUID4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)) value for a building.
Unless you are onboarding a Google building, this value is generated by ABEL and does not need to be provided for initial onboarding.

***Note:*** A Site should not be considered an entity and should not be listed in
the `Entities` tab.

### Entities

The `Entities` tab holds all information about [reporting entities](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#reporting-physical-devices) and [virtual entities](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#virtual-devices) in a building or site. ***Note:*** If ABEL is being used for Google then Guids are required for all
entities in the `FACILTITIES` namespace and can be retrieved via DB API.

`Entity Code` *string* **required**

[Human-readable code](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#identifiers) for an entity an should  e.g. `AHU-1001`

`Entity Guid` *string*
- [UUID4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random))
  [identifier](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#identifiers) for an entity. **Note:** If an entity belongs to the `FACITITLIES` namespace and ABEL is
  being used or Google, then this field is **required**.

`Etag` *string*
- Version control tag for entities in an entity type database. Used only when updating an existing building config.

`Is Reporting` *Boolean* **required**
- TRUE if an entity is [reporting its own data](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#reporting-physical-devices) and FALSE if [the entity is virtual](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#virtual-devices).

`Cloud Device ID` *string*
- Cloud registry [device identifier](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#identifiers). If `Is Reporting` is set to `TRUE` and this device is [reporting its own data](https://github.com/google/digitalbuildings/blob/master/ontology/docs/building_config.md#reporting-physical-devices), then this field is **required**. e.g. `2801644336271390`

`DBO Namespace` *string* **required**
- [Namespace](https://github.com/google/digitalbuildings/blob/master/ontology/docs/ontology.md#namespaces) for an entity as defined in the [Digital Buidings Ontology](https://github.com/google/digitalbuildings/tree/master/ontology). e.g. `HVAC`

`DBO General Type`
- [General Type](https://github.com/google/digitalbuildings/blob/master/ontology/docs/model.md#general-types) for an entity as defined in the [Digital Buildings Ontology](https://github.com/google/digitalbuildings/tree/master/ontology). e.g. `AHU`

`DBO Entity Type Name` *string* **required**
- [Entity Type Name](https://github.com/google/digitalbuildings/blob/master/ontology/docs/ontology.md#type-names) for an Entity as defined in the [Digital Buildings Ontology](https://github.com/google/digitalbuildings/tree/master/ontology). e.g. `VAV_SD_DSP`

### Entity Fields

The `Entity Fields` tab defines fields for reporting and virtual entities defined in the `Entities` tab.

`Entity Code`
- String
- **Required**
- Human-readable code for an entity which a field is a data point of.
- This code must already be defined in the [Entities](#entities) table.
- e.g. `AHU-1001`

`Entity Guid`
- String
- Optional
- [UUID4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)) value for an entity corresponding to the entity in the Entity Code column.

`Reporting Entity Code`
- String
- **Required**
- Human-readable code for an entity which a field is a data point of.
- e.g. `AHU-1001`

`Reporting Entity Guid`
- String
- Optional
- [UUID4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)) value for an entity correspong to the entity in the Reporting Entity Code Column.

`DBO Standard Field Name`
- String
- **Required**
- Standardized field name belonging to an entity type as defined in the [Digital Buildings Ontology](https://github.com/google/digitalbuildings/tree/master/ontology).
- e.g. `zone_air_temperature_sensor`

`Reporting Entity Field`
- String
- Optional
- Name of a field as it is reported by a gateway or other reporting entity.
- e.g. `zone_air_temperature_sensor_1`

`Raw Field Path`
- String
- **Required**
- Path to data point on a reporting entities telemetry payload.
- e.g. `pointset.points.discharge_fan_run_command.present_value`

`Raw Unit Path`
- String
- Optional
- Path to a data point's units in a telemetry payload
- e.g. `pointset.points.zone_air_cooling_temperature_setpoint.units`

`DBO Standard Unit Value`
- String
- Optional
- Standardized unit for a standard field as defined in [Digital Buildings Ontology](https://github.com/google/digitalbuildings/tree/master/ontology/yaml/resources/fields).
- e.g. `degrees_celsius`

`Raw Unit Value`
- String
- Optional
- Unit value as reported by a reporting device.
- e.g. `degC`

### States

The `States` tab defines values for multi-state fields defined in the `Entity
Fields` tab.

`Entity Code`
- String
- **Required**
- Human-readable code for an entity which a field is a data point of.
- e.g. `AHU-1001`

`Entity Guid`
- String
- Optional
- [UUID4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)) value for an entity corresponding to the entity in the Entity Code column.

`Reporting Entity Field`
- String
- **Required**
- Name of the entity field which reports a multi-state value in its telemetry payload.

`DBO Standard State`
- String
- **Required**
- Stanardized multi-state value name as defined in [Digital Buildings Ontology](https://github.com/google/digitalbuildings/blob/master/ontology/yaml/resources/states/states.yaml).
- e.g. `ON`

`Payload State`
- String
- **Required**
- Raw multi-state value for a data point in the telemetry payload for a device.
- e.g. `on`

### Connections

Connections between entities within a building. `CONTAINS` connections to the
building do not need to be defined as they are implied.

`Source Entity Code`
- String
- **Required**
- Human-readable entity code for a connection source.
- e.g. `AHU-1001`

`Source Entity Guid`
- String
- Optional
- [UUID4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)) value for an entity corresponding to an entity in the `Entities` tab for connection source.

`DBO Connection Type`
- **Required**
- A connection type as defined by [Digital Buildings Ontology connections](https://github.com/google/digitalbuildings/blob/master/ontology/yaml/resources/connections/connections.yaml).
- e.g. CONTAINS

`Target Entity Code`
- String
- **Required**
- Human-readable entity code for a conntection target.
- e.g. `AHU-1001`

`Target Entity Guid`
- String
- Optional
- [UUID4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)) value for an entity corresponding to an entity in the `Entities` tab for a connection target.
